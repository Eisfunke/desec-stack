-- nsmaster database
CREATE DATABASE pdns;
CREATE USER 'pdns'@'${DESECSTACK_IPV4_REAR_PREFIX16}.4.%' IDENTIFIED BY '${DESECSTACK_DBMASTER_PASSWORD_pdns}';
GRANT SELECT, INSERT, UPDATE, DELETE ON pdns.* TO 'pdns'@'${DESECSTACK_IPV4_REAR_PREFIX16}.4.%';

-- replication
CREATE USER ns1@'%' IDENTIFIED BY "${DESECSTACK_DBMASTER_PASSWORD_ns1replication}";
GRANT RELOAD, REPLICATION CLIENT, REPLICATION SLAVE ON *.* TO ns1@'%' REQUIRE SUBJECT '/CN=${DESECSTACK_DBMASTER_SUBJECT_ns1replication}';
GRANT SELECT ON pdns.* TO ns1@'%' REQUIRE SUBJECT '/CN=${DESECSTACK_DBMASTER_SUBJECT_ns1replication}';

CREATE USER ns2@'%' IDENTIFIED BY "${DESECSTACK_DBMASTER_PASSWORD_ns2replication}";
GRANT RELOAD, REPLICATION CLIENT, REPLICATION SLAVE ON *.* TO ns2@'%' REQUIRE SUBJECT '/CN=${DESECSTACK_DBMASTER_SUBJECT_ns2replication}';
GRANT SELECT ON pdns.* TO ns2@'%' REQUIRE SUBJECT '/CN=${DESECSTACK_DBMASTER_SUBJECT_ns2replication}';
